import{c as v,r as i,j as e,L as b,d as r}from"./index-B_8ijzOe.js";import{f as p}from"./InventoryUtils-CuExVan7.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=v("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),N=({product:t,index:l=0})=>{const[n,d]=i.useState(!1),[x,u]=i.useState("USD");i.useEffect(()=>{const m=JSON.parse(localStorage.getItem("storeSettings")||"{}");m.currency&&u(m.currency);const c=()=>{const y=JSON.parse(localStorage.getItem("storeSettings")||"{}");y.currency&&u(y.currency)};return window.addEventListener("storeSettingsUpdated",c),()=>{window.removeEventListener("storeSettingsUpdated",c)}},[]);const g=`${l*.1}s`,h=t.price,s=t.discount||0,a=s>0?t.price*(1-s/100):t.price,o=p(h,t.currency||x),j=p(a,t.currency||x);return e.jsxs(b,{to:`/product/${t.id}`,className:r("group relative block overflow-hidden rounded-2xl bg-white p-2 transition-all duration-300","shadow-sm hover:shadow-md animate-scale-in","border border-border/50 hover:border-border"),style:{animationDelay:g},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-xl bg-secondary/30",children:e.jsxs("div",{className:"h-full w-full relative",children:[t.mediaType==="video"?e.jsx("video",{src:t.images[0],className:r("h-full w-full object-cover object-center transition-transform duration-500 ease-out-expo",n&&"scale-110"),autoPlay:n,loop:!0,muted:!0,playsInline:!0}):e.jsx("img",{src:t.images[0],alt:t.name,className:r("h-full w-full object-cover object-center transition-transform duration-500 ease-out-expo",n&&"scale-110"),loading:"lazy"}),e.jsx("div",{className:r("absolute inset-0 bg-gradient-to-b from-transparent to-background/5 opacity-0 transition-opacity duration-300",n&&"opacity-100")}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-2",children:[t.featured&&e.jsxs("div",{className:r("bg-primary text-primary-foreground px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1","animate-scale-in transition-all transform hover:scale-110"),children:[e.jsx(f,{size:12}),e.jsx("span",{children:"Destaque"})]}),t.onSale&&e.jsxs("div",{className:r("bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1","animate-scale-in transition-all transform hover:scale-110","animate-pulse"),children:[e.jsx(f,{size:12}),e.jsx("span",{children:"Promoção"})]}),t.discount&&t.discount>0&&e.jsxs("div",{className:r("bg-green-500 text-white px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1","animate-scale-in transition-all transform hover:scale-110"),children:[e.jsx(f,{size:12}),e.jsxs("span",{children:[t.discount,"% Off"]})]}),t.tags&&t.tags.map((m,c)=>e.jsxs("div",{className:r("bg-secondary text-foreground px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1","animate-scale-in transition-all transform hover:scale-110"),style:{animationDelay:`${(c+1)*.1}s`},children:[e.jsx(f,{size:12}),e.jsx("span",{children:m})]},c))]}),t.stock!==void 0&&t.stock<=0&&e.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Out of Stock"}),t.stock!==void 0&&t.stock>0&&t.stock<=(t.lowStockThreshold||10)&&e.jsx("div",{className:"absolute top-2 right-2 bg-amber-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Low Stock"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-base line-clamp-1",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.brand})]}),e.jsx("div",{className:"text-right",children:s>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:j}),e.jsx("p",{className:"text-xs text-muted-foreground line-through",children:o})]}):e.jsx("p",{className:"text-sm font-semibold",children:t.formattedPrice||o})})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[t.colors&&t.colors.slice(0,3).map((m,c)=>e.jsx("span",{className:"inline-block text-xs px-2 py-1 bg-secondary rounded-full",children:m},c)),t.colors&&t.colors.length>3&&e.jsxs("span",{className:"inline-block text-xs px-2 py-1 bg-secondary rounded-full",children:["+",t.colors.length-3]})]})]}),e.jsx("div",{className:r("absolute bottom-0 left-0 right-0 bg-primary text-primary-foreground text-center py-3 font-medium text-sm translate-y-full transition-transform duration-300 ease-out-expo",n&&"translate-y-0"),children:"View Product"})]})},k=({products:t,title:l,subtitle:n})=>{const d=i.useRef(null),[x,u]=i.useState(!1),[g,h]=i.useState("USD");return i.useEffect(()=>{const s=()=>{const o=JSON.parse(localStorage.getItem("storeSettings")||"{}");o.currency&&h(o.currency)};s();const a=()=>{s()};return window.addEventListener("storeSettingsUpdated",a),()=>{window.removeEventListener("storeSettingsUpdated",a)}},[]),i.useEffect(()=>{if(!d.current)return;const s=new IntersectionObserver(([a])=>{a.isIntersecting&&(u(!0),s.disconnect())},{threshold:.1});return s.observe(d.current),()=>{s.disconnect()}},[]),i.useEffect(()=>{const s=JSON.parse(localStorage.getItem("siteContent")||"{}"),a=document.getElementById("catalog-title"),o=document.getElementById("catalog-subtitle");a&&!l&&s.homepageTitle&&(a.textContent=s.homepageTitle),o&&!n&&s.homepageSubtitle&&(o.textContent=s.homepageSubtitle)},[l,n]),e.jsx("section",{className:"py-16 px-6 md:px-8",children:e.jsxs("div",{className:"container max-w-7xl mx-auto",children:[(l||n)&&e.jsxs("div",{className:"text-center mb-12",children:[l&&e.jsx("h2",{id:"catalog-title",className:"text-3xl md:text-4xl font-bold",children:l}),n&&e.jsx("p",{id:"catalog-subtitle",className:"mt-3 text-muted-foreground max-w-2xl mx-auto",children:n})]}),e.jsx("div",{ref:d,className:r("grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",!x&&"opacity-0"),children:t.map((s,a)=>e.jsx(N,{product:{...s,formattedPrice:p(s.price,s.currency||g)},index:a},s.id))}),t.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No products found."})})]})})};export{k as C};
